- https://github.com/sejoker/awesome-jscodeshift

  - `react-codemod`
    - TODO
  - `js-codemod`
    - TODO
  - `js-transforms`
    - codemods
      - `bind-this-to-bind-expression` (ignore)
        - uses non-standard bind operator
      - `call-expression-bind-this-to-arrow-function-expression` (almost)
        - note: similar to `js-codemod/jest-arrow`
        - matching is different because of search in flattened AST
        - manual parenthesizing required if return value is an object literal
        - have to search twice
          - would be slightly better with cursor snapshots
        - nesting would be an issue
      - `function-expression-to-arrow-function-expression` (almost)
        - note: same problems as to `call-expression-bind-this-to-arrow-function-expression`
        - note: check for `this` is too conservative
          - also in the original script
      - `props-to-destructuring` (no)
        - too complicated
          - reuse existing props destructure if there is one
          - check if variable is already in scope and came from props
        - working with variable scopes is not supported
        - keyword whitelist is not supported
        - no way to avoid creating two destructure entries for two uses of the same prop
      - `pure-to-composite-component` (almost)
        - note: example does not support directly destructured or renamed props argument
        - note: search for `props` in script is not very precise
        - paste into return is broken
        - no class or JSX support
        - have to search twice
          - would be slightly better with cursor snapshots
        - nesting would be an issue
  - `rackt-codemod`
    - general notes
      - API change codemods for `react-router` and `history`
    - codemods
      - `react-router/deprecate-Link-location-props` (no)
        - no JSX support
      - `react-router/deprecate-context-history` (almost)
        - would have to handle each of the 3 cases separately
        - note: example replacement is not very accurate
      - `deprecate-isActive-query` (no)
        - can't find calls with exactly one argument
        - can't select second argument on all cursors (!)
        - would have to repeat edit manually for missing query argument vs null query
      - `deprecate-createPath-createHref-query` (yes)
        - note: this codemod replaces positional arguments with an object of named arguments
        - there's some untested parsing logic which couldn't be supported
      - `deprecate-pushState-replaceState` (ignore)
        - same as `deprecate-createPath-createHref-query`
  - `coffee-to-es2015-codemod` (ignore)
    - general notes
      - this transforms coffeescript compiler output to be more like handwritten js
      - TODO potentially worth looking at later
  - `5to6-codemod`
    - codemods
      - `amd` (no)
        - no support for imports
        - no support for zipping lists of cursors (import file names and identifiers)
      - `cjs` (no)
        - no support for imports
        - too complex
          - same basic task as ``webpack-babel-codemod/dynamic-require-import`, but way more complex and accurate
      - `no strict` (yes)
        - just search for `ExpressionStatement` `"use strict"` and delete
      - `exports` (no)
        - too complex
      - `named-export-generation` (no)
        - too complex
      - `let` (yes)
      - `simple-arrow` (almost)
        - has same nested copy-paste problem as `js-codemod/jest-arrow`
  - `es5-function-to-class-codemod` (no)
    - general notes
      - no support for classes
      - likely other issues would arise (missing jump to definition?)
  - `webpack-babel-codemod`
    - general notes
      - this just converts a very specific type of `require` to an `import`
    - codemods
      - `dynamic-require-import` (almost)
        - no support for imports
          - no reason why adding it wouldn't work
        - adding after first import _or_ as first statement if no imports doesn't work
          - can only do one or the other
  - `lodash-to-lodash-amd-codemods` (ignore)
    - general notes
      - I don't get what this does
  - `rm-debugger` (ignore)
    - general notes
      - irrelevantly simple
        - this really only removes `debugger` calls
  - `AMD Transformer` (ignore)
    - general notes
      - not a very relevant example
      - probably possible to do, since it's nearly just a find-replace
  - `preact-codemod`
    - codemods
      - `import-declarations` (almost)
        - can't edit multiple files
          - can't get once-per-file behavior with only one file
          - can simulate multiple files using functions
        - can't add both conditional named imports (`render` and `Component`)
          - would require cursor snapshots
      - `component` (almost)
        - finding calls with only good properties is hacky
          - search for call, search for bad properties, reduce to first cursor, go up to call
        - "calling" both sub-transforms is hacky
          - assumes that the first transform removes all `createClass` calls that it was called with
      - `component-sfc` (yes)
        - note: actually drops some allowed options (e.g. `defaultProps`)
        - note: some movements this is doing are not safe
          - `closest`, `find`, `closest` might not be a noop
      - `component-class` (no)
        - no support for classes
          - would probably be possible with class support
      - `props` (yes)
        - ignoring the fact that there's no JSX or class support
        - might not work with nested functions
      - `state` (yes)
        - adding `props` parameter if missing is hacky
          - add `state` first, then check if it's the only one and add `props`
          - would be slightly better with cursor snapshots
      - `removePropTypes` (yes)
  - `mocha2ava-codemod`
    - codemods
      - `add-pass-test` (almost)
        - can't match one of multiple types (function _or_ arrow)
        - can't unwrap `co.wrap` and later combine it with other cursors
        - can't strictly check that `t` is used
          - no strict find uses (but codemod doesn't do that either)
          - lookup table for asserts is possible with regex but impractical
      - `mocha2ava`
        - `extractDescribes` (no)
          - can do the flatten sometimes, but not in the general case
            - would need "move cursors up to common ancestor cursor" command
          - can't do renaming
            - can't work with strings
            - can't collect path of ancestors to construct name from
            - can't write complex logic
        - `it2test` (maybe)
        - `this2content` (yes)
        - `insertRequires` (no)
          - import statements are not supported
          - can't check whether import statements are used an then branch on that
            - would require cursor snapshots
  - `undecorate-codemod` (no)
    - general notes
      - can't work with classes or decorators
  - `vue-codemods`
    - general notes
      - obviously can't work with vue files directly, but could do some equivalent task with plain js
    - codemods
      - `sort_keys` (no)
        - no sort feature
      - `uppercase_constants` (no)
        - note: generally not a very correct codemod
        - can't filter top-level statements
        - can't find all usages
          - either correctly with built in support
          - or roughly by searching for an identifier from the selection
        - can't search for more copies of the same literal
        - can't match one of multiple types (string _or_ regex _or_ number)
        - can't search up until a result is found
          - a node _within_ some surrounding node must match
      - `extract_non_instance_methods` (almost)
        - can't filter by usages in template
          - can't filter by usages in general
        - can't remove `this` from calls after extracting method
          - can't find all usages
        - shorthand function-in-property syntax is not supported

- https://github.com/rajasegar/awesome-codemods

- reasons (TODO add counts for `react-codemod` and `js-transforms`)
  - (3) matching is different because of search in flattened AST
  - (2) manual parenthesizing required
    - probably not listed in all examples
  - (4) have to recreate cursors multiple times
    - would be solved by cursor snapshots
  - (5) nested copy-paste would be an issue
  - (4) too complicated
  - (2) lookup tables are possible but impractical
  - (1) can't avoid duplicate items
  - (1) bug in paste
  - (11) unsupported syntax
    - import, class, JSX
  - (5) can't handle separately found locations together
  - (1) can't filter for exactly one item in list
  - (1) can't select second list item (!)
  - (2) can't create AST by parsing arbitrary string using JS
  - (1) no support for zipping lists of cursors
  - (1) adding after first import _or_ as first statement if no imports doesn't work
  - (1) can't edit multiple files
  - (1) adding `props` parameter if missing is hacky
  - (4) no strict ``find usages of variable''
    - TODO what does "can't filter by usages in template" mean?
  - (1) no strict ``find definitions of variable''
  - (1) can do the flatten sometimes, but not in the general case
    - would need "move cursors up to common ancestor cursor" command
  - (1) can't collect path of ancestors
  - (1) can't check whether import statements are used an then branch on that
    - TODO look at what this means again
    - this has something to do with cursor snapshots?
  - (1) no sort feature
  - (1) can't filter top-level statements
  - (1) can't search for dynamic query
    - can't search for more copies of the same literal
  - (1) can't search up
